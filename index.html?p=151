<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<!--
   +MMMMMM.     MMMMM7    MMMMMMMMMMM.    MMMMMM7     MMMMM  MMMMM. .MMMMMMMMMMMMMMM    MMMMMMMMMMMMMMM
    MMMMMMM.  .MMMMMM   MMMMMMMMMMMMMM8   MMMMMM7     MMMMM  MMMMM   MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM
     MMMMMMM  MMMMM?   MMMMMMMM7MMMMMMMM. MMMMMM7     MMMMM  MMMMM.  MMMMMM7778MMMMMMM= MMMMMMMMMMMMMMM
      MMMMMMMMMMMMM.  :MMMMMM7   .MMMMMM. MMMMMM7     MMMMM   .MM,   MMMMMM.   .MMMMMMM MMMMMM
       MMMMMMMMMMM    MMMMMMM     MMMMMMM MMMMMM7     MMMMM   MM,    MMMMMM.  ..MMMMMMO MMMMMM
        MMMMMMMMM     MMMMMMO     MMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMM
         MMMMMMM.     MMMMMM$     NMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMMD   MMMMMMMMMMMMM
         =MMMMMI     .MMMMMMM.    MMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMI    MMMMMM
         =MMMMM7      DMMMMMM     MMMMMM$ MMMMMM8    .MMMMM          MMMMMM. ZMMMMMM    MMMMMM
         =MMMMM7      .MMMMMMM . MMMMMMM  MMMMMMMM .ZMMMMM7          MMMMMM...MMMMMMM   MMMMMMMMMMMMMMM
         =MMMMM7        MMMMMMMMMMMMMMM.  .MMMMMMMMMMMMMMM           MMMMMM.  .MMMMMMI  MMMMMMMMMMMMMMM
         =MMMMM7         8MMMMMMMMMMMZ.     MMMMMMMMMMMMM            MMMMMM.  .MMMMMMM  MMMMMMMMMMMMMMM
         =MMMMM7            $MMMMM?            NMMMMMM.              MMMMMM     MMMMMMM MMMMMMMMMMMMMMM


       .=MMMMMMM.     OMMMMMM    .MMMMM       MMMMMMM       MMMMMM    ~MMMMMM
      MMMMMMMMMMMMM.  8MMMMMM     MMMMM    8MMMMMMMMMMM$    MMMMMM    =MMMMMM
     MMMMMMMMMMMMMMM. 8MMMMMM     MMMMM   MMMMMMMMMMMMMMM   MMMMMM    =MMMMMM
   .MMMMMM,  .?MMMMD. 8MMMMMM     MMMMM .MMMMMMM. .MMMMMM.  MMMMMM    =MMMMMM
   .MMMMMMM.          8MMMMMM     MMMMM  MMMMMM.   .MMMMMM. MMMMMM    =MMMMMM
    NMMMMMMMMMMMM~..  8MMMMMM     MMMMM :MMMMMM.            MMMMMMMMMMMMMMMMM
    .MMMMMMMMMMMMMMM  8MMMMMM     MMMMM 8MMMMMM             MMMMMMMMMMMMMMMMM
       MMMMMMMMMMMMMD 8MMMMMM     MMMMM 8MMMMMM             MMMMMMMMMMMMMMMMM
           ,MMMMMMMMM 8MMMMMM     MMMMM  MMMMMM.    MMMMMZ  MMMMMM    =MMMMMM
   MMMMMM.     MMMMMM 8MMMMMM     MMMMM .MMMMMM,    MMMMMM. MMMMMM    =MMMMMM
    MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM8   MMMMMMMMMMMMMMM   MMMMMM    =MMMMMM
    .MMMMMMMMMMMMMMM   $MMMMMMMMMMMMMM     MMMMMMMMMMMMM.   MMMMMM    =MMMMMM
      OMMMMMMMMMMM.      MMMMMMMMMMM.       8MMMMMMMMMZ     MMMMMM    ~MMMMMM


         MMMMMMM.
        ?MMMMMMM:
        MMMMMMMMM
       :MMMMMMMMM.
       MMMMMMMMMMM.
      ,MMMM  MMMMM.
      MMMMM  MMMMMM
     ,MMMMI77DMMMMM.
     MMMMMMMMMMMMMMM
    .MMMMMMMMMMMMMMM.
    MMMMM     .MMMMMM
   .MMMMM      MMMMMM.
   MMMMM.      OMMMMMM


   7MMMMMM      MMMMM  MMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM    MMMMMMMMMMMM8.
   7MMMMMMM     MMMMM  MMMMMMMMMMMMMMM  MMMMMMMMMMMMMMMMO. MMMMMMMMMMMMMMM
   7MMMMMMMM.   MMMMM  MMMMMMMMMMMMMMM  MMMMMM777MMMMMMMM. MMMMMMMMMMMMMMMM
   7MMMMMMMMM.  MMMMM  MMMMMM           MMMMMM    .MMMMMM= MMMMMM    MMMMMMM.
   7MMMMMMMMMM  MMMMM  MMMMMM           MMMMMM.  ..MMMMMM  MMMMMM     MMMMMM.
   7MMMM MMMMMM.MMMMM  MMMMMMMMMMMMM    MMMMMMMMMMMMMMMMM. MMMMMM     MMMMMMI
   7MMMMI MMMMMNMMMMM  MMMMMMMMMMMMM    MMMMMMMMMMMMMMM~   MMMMMM     MMMMMMZ
   7MMMM7  MMMMMMMMMM  MMMMMM           MMMMMMMMMMMMMM     MMMMMM     MMMMMM
   7MMMM7  =MMMMMMMMM  MMMMMM           MMMMMM  MMMMMMM.   MMMMMM   .MMMMMMM
   7MMMM7   +MMMMMMMM  MMMMMM           MMMMMM   MMMMMMO   MMMMMM...MMMMMMM.
   7MMMM7    ?MMMMMMM  MMMMMMMMMMMMMMM  MMMMMM  .DMMMMMM.  MMMMMMMMMMMMMMM.
   7MMMM7    .IMMMMMM  MMMMMMMMMMMMMMM  MMMMMM    MMMMMMM  MMMMMMMMMMMMMN
   7MMMM7      $MMMMM  MMMMMMMMMMMMMMM..MMMMMM    .MMMMMM$ MMMMMMMMMI

-->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>  changing user home directory under mac os x - greg&#039;s weblog</title>
<meta name="robots" content="all">
<meta name="author" content="Greg Knapp">
<meta name="description" content="Greg's web log about software development, operating systems and other geeky topics">
<meta name="viewport" content="width=1024px">
<link rel="me" type="text/html" href="http://www.google.com/profiles/virtual.greg">
<link rel="stylesheet" type="text/css" media="screen" href="http://static.gregk.me/css/style.min.130721.css">
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" media="screen" href="http://static.gregk.me/css/ie6.css">
<![endif]-->
<!--[if IE]>
<style type="text/css" media="screen">
.post div.content, .post div.comments {
	display: inline-block;
}

#query {
    line-height: 1.6;
}
</style>
<![endif]-->

<script type='text/javascript' src='http://archive.gregk.me/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script>

<link rel='prev' title='Javascript indexOf &#8211; String vs Array' href='/2010/javascript-indexof-string-vs-array' />
<link rel='next' title='SSH&#8217;ing to different machines with the same IP' href='/2010/ssh-to-machines-with-the-same-ip' />

<link rel='canonical' href='/2010/change-user-home-directory-under-mac-os-x' />
<link rel='shortlink' href='/2010/change-user-home-directory-under-mac-os-x' />
</head>
<body>
<div id="container_header">
  <div id="header">
    <div class="title"><a href="index.html">greg&#039;s weblog</a></div>
    <div class="slug">the more I learn, the less I know</div>
  </div>
</div>
<div id="container_flooring">
  <div id="flooring">
    <div id="books">
      <img src="resources/images/books.png" width="330" height="298" usemap="#map_books" alt="about me" title="">
      <map name="map_books" id="map_books">
        <area shape="poly" coords="17,73,81,288,210,248,254,264,321,88,206,37,173,8,140,36" href="about" alt="about me" title="">
      </map>
    </div>
    <div id="camera">
      <img src="resources/images/camera.png" width="165" height="178" usemap="#map_camera" alt="photography">
      <map name="map_camera" id="map_camera">
        <area shape="poly" coords="10,24,34,100,29,133,39,165,157,125,143,77,126,66,111,75,106,92,98,93,93,87,97,75,75,2" href="photography.html" alt="photography" title="">
      </map>
    </div>
    <div id="macbook">
      <img src="resources/images/macbook.png" width="373" height="357" usemap="#map_macbook" alt="software projects">
      <map name="map_macbook" id="map_macbook">
        <area shape="poly" coords="49,5,55,98,9,279,273,346,318,167,374,86" href="software.html" alt="software projects" title="">
      </map>
    </div>
    <div id="iphone">
      <img src="resources/images/iphone.png" width="81" height="107" usemap="#map_iphone" alt="contact me">
      <map name="map_iphone" id="map_iphone">
        <area shape="poly" coords="7,83,37,2,79,17,50,99" href="contact.html" alt="contact me">
      </map>
    </div>
  </div>
</div>
<div id="container_stage">
    <div id="stage">
        <div id="content" class="hfeed">
              <div class="post hentry" id="post-151">
                <div class="heading">
                    <div class="date">
                        <div class="day">31</div><div class="month">Jan</div>
                    </div>
                    <div class="title">
                        <h1 class="entry-title"><a href="/2010/change-user-home-directory-under-mac-os-x">Changing user home directory under Mac OS X</a></h1>
                        <small>
                        	posted <abbr class="published" title="2010-01-31T13:58:46+00:00">2010</abbr> // 
                        	<a href="category/osx/index.html" title="View all posts in osx" rel="category tag">osx</a> // <span class="comment"><a href="/2010/change-user-home-directory-under-mac-os-x#comments">3</a></span>
                        </small>
                    </div>
                </div>
                <div class="content entry-content">
                	<p>Yesterday I finally got around to removing my flakey superdrive from my Macbook Pro and replaced it with an optical bay hard disk (OBHD) from <a href="http://www.google.com/search?hl=en&#038;q=NewModeUS" rel="external nofollow">NewModeUS</a>. This meant I was able to add another 320GB drive where my superdrive once lived (much needed as I was at 92% disk usage on my system drive). I also have an Intel X25-M 80GB to install but I&#8217;ll save that for when I have the time.<br />
<span id="more-151"></span><br />
In preparation to moving to SSD, I&#8217;m looking to divert as many writes as possible, to prolong the performance of the drive (no TRIM support in OS X at present &#8211; no, not in Snow Leopard either). One of the best ways to do this is to migrate my user directory to my second (magnetic) hard drive. You might argue I&#8217;m losing the performance I paid for getting an SSD but boot times and applications launches should still benefit as the OS and apps reside on my X25-M.</p>
<p><b>Before proceeding with these instructions it&#8217;s vital you have a backup of your user directory and any other data on your Mac that you want to keep.</b></p>
<p>One of the top search results in Google for  how to move / change your user directory in Mac OS X recommends <a href="http://www.macosxhints.com/article.php?story=2007041217125440">using a symlink</a>. There is however a <a href="http://www.macworld.com/article/1492/2002/06/osxsecrets.html">cleaner method</a> documented back in 2002:</p>
<blockquote><p class="first">First, make sure that on the new volume, the â€œIgnore ownership on this volume&#8221; setting in the volume Get Info window is <b>not</b> checked</p>
<p><cite>Dan Frakes</cite></p></blockquote>
<p>Open Terminal and enter:</p>
<pre class="bash">$ sudo ditto -rsrc "/Users/greg" "/Volumes/newvolume/Users/greg"
$ sudo niutil -createprop / "/users/greg" home "/Volumes/newvolume/Users/greg"
</pre>
<p>The problem being that <code>niutil</code> no longer exists in OS X 10.5 (Leopard) and later.</p>
<pre class="bash">$ niutil
-bash: niutil: command not found</pre>
<p>In Leopard and later the NetInfo Manager has been replaced the Directory Services client (<code>dscl</code>). Since Mac OS X 10.4 <code>ditto</code> also has the <code>-rsrc</code> arguments enabled by default.</p>
<p>The commands you&#8217;re looking for under Leopard (and Snow Leopard) are as follows:</p>
<p><small>(substitute your own username, here I&#8217;m moving my user directory to my second hdd/volume &#8216;Data&#8217;)</small></p>
<pre class="bash">
$ sudo ditto "/Users/greg" "/Volumes/Data/Users/greg"
Password: (enter password)
$ dscl
Entering interactive mode... (type "help" for commands)
 > cd /Local/Default/Users/
 > ls
 > change greg dsAttrTypeNative:home /Users/greg /Volumes/Data/Users/greg
 > exit
</pre>
<p>Logout and login again, verify your home directory has moved by opening <span class="macmenu">Terminal</span> and checking the public working directory:</p>
<pre class="bash">$ pwd
/Volumes/Data/Users/greg
</pre>
<p>Now rename your old user directory to be sure, before removing it (or leaving it if you can afford the space):</p>
<pre class="bash">$ cd /Volumes/OSX/Users/
$ mv greg greg.old
</pre>
<p>I rebooted after this to check my machine started up without any issues. Then removed my old user directory (<code>sudo rm -rf greg.old</code>).</p>
<p>Congratulations you&#8217;ve moved your user directory.</p>
                    <div class="g-plusone" data-size="medium"></div>
                        <a href="https://twitter.com/share?via=g4egk&amp;text=Changing user home directory under Mac OS X" class="twitter-share-button">Tweet</a>
                    <br>
                </div>
                <div id="previous"></div>
                <div id="next"></div>
                
                
  <div class="comments">
    <h3>comments</h3><a name="comments"></a>
      <div class="comment hcomment" id="comment-393">
      <small class="poster vcard">
                  <span class="fn">Peri</span> //
                <abbr class="dtposted" title="2010-09-26T10:18:05+00:00">26.Sep.2010</abbr> // 10:18      </small>
      <div class="description">
        <p>it seems that this permission has been take away since Jan,<br />
any ideas?</p>
<p>Peri-Pans-MacBook:Users PerIPan$ mv PerIPan PerIPan.old<br />
mv: rename PerIPan to PerIPan.old: Permission denied</p>
<p>Thanks!<br />
Peri</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-479">
      <small class="poster vcard">
                  <span class="fn">Peri</span> //
                <abbr class="dtposted" title="2010-10-13T20:39:48+00:00">13.Oct.2010</abbr> // 20:39      </small>
      <div class="description">
        <p>thank you very useful,<br />
in order to complete the process I did the copy as you describe and then I moved the user folder via the &#8216;Accounts&#8217; Advanced option.<br />
:)</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-1430">
      <small class="poster vcard">
                  <a href="http://f" class="url fn" name="comment-1430" rel="external nofollow">DanielJenkins</a> //                 <abbr class="dtposted" title="2011-10-01T03:38:02+00:00">01.Oct.2011</abbr> // 03:38      </small>
      <div class="description">
        <p>For peri try using $ sudo  always seams helpful. </p>
<p>Check out how change the destination of the home folder, thus you won&#8217;t have to re-install the OS.<br />
<a href="http://www.tuaw.com/2009/05/14/tuaw-tip-moving-your-home-folder-to-another-disk-or-moving-it/" rel="nofollow">http://www.tuaw.com/2009/05/14/tuaw-tip-moving-your-home-folder-to-another-disk-or-moving-it/</a></p>
      </div>
    </div>
    	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
</div>



              </div>
        </div>
    <div id="peripheral">
      <div id="blog_meta">
        <div id="search">
                    <form method="get" action="http://archive.gregk.me/search" accept-charset="utf-8">
                        <fieldset><input type="text" id="query" name="s" value="" /></fieldset>
                    </form>        </div>
        
        <div class="tags">
          <h4>this post's tags</h4>
          <ul><li><a href="tag/dscl/index.html" rel="tag">dscl</a></li><li><a href="tag/leopard/index.html" rel="tag">leopard</a></li><li><a href="tag/niutil/index.html" rel="tag">niutil</a></li><li><a href="tag/snow-leopard/index.html" rel="tag">snow leopard</a></li></ul>        </div>
      </div>
      <div id="feeds">

      </div>
    </div>
    </div>
</div>
<script charset="utf-8" src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
<script type="text/javascript">
  window.___gcfg = {lang: 'en-GB'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<div id="container_footer">
    <div id="footer" class="vcard">
        <div class="who">
        	<h4>Who am I?</h4>
        	<p>My name is Greg &amp; this is my blog.
        	I'm a software engineer, amateur photographer, dad &amp; fulltime nerd.</p>
        	<p class="adr">I live in
        	<a href="http://maps.google.co.uk/maps/place?q=Hitchin" class="locality">Hitchin</a>, <abbr title="United Kingdom" class="country-name">England</abbr>. Once in a blue moon I write my thoughts on this blog.</p>
        </div>
        <div class="when">&nbsp;</div>
        <div class="where">
            <a href="http://github.com/gknapp" title="view my code" id="github"><span>My github projects</span></a>
            <a href="http://www.linkedin.com/in/g4egk" title="view my professional profile" id="linkedin" rel="me"><span>My Linkedin profile</span></a>
        </div>
        <div class="notice">
        	<strong>&copy; 2005-2014 <span class="fn n"><span class="given-name">Greg</span> <span class="family-name">Knapp</span></span>.</strong>
        	Views expressed here are my own and not necessarily those of my employer.
        </div>
        <div class="clear"><!-- for iPhone --></div>    </div>
</div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1966441-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
  !window.jQuery && document.write(
  	unescape('%3Cscript src="http://static.gregk.me/js/jquery-1.4.2.min.js"%3E%3C/script%3E')
  )
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="http://static.gregk.me/js/jquery.ifixpng2.js"></script>
<script type="text/javascript">
  $.ifixpng('http://static.gregk.me/images/pixel.gif');
  $("#books img, #camera img, #macbook img, #iphone img").ifixpng();
</script>
<![endif]-->
<script type="text/javascript" src="http://static.gregk.me/js/min.110426.js"></script>
</body>
</html>
