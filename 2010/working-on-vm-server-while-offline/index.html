<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<!--
   +MMMMMM.     MMMMM7    MMMMMMMMMMM.    MMMMMM7     MMMMM  MMMMM. .MMMMMMMMMMMMMMM    MMMMMMMMMMMMMMM
    MMMMMMM.  .MMMMMM   MMMMMMMMMMMMMM8   MMMMMM7     MMMMM  MMMMM   MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM
     MMMMMMM  MMMMM?   MMMMMMMM7MMMMMMMM. MMMMMM7     MMMMM  MMMMM.  MMMMMM7778MMMMMMM= MMMMMMMMMMMMMMM
      MMMMMMMMMMMMM.  :MMMMMM7   .MMMMMM. MMMMMM7     MMMMM   .MM,   MMMMMM.   .MMMMMMM MMMMMM
       MMMMMMMMMMM    MMMMMMM     MMMMMMM MMMMMM7     MMMMM   MM,    MMMMMM.  ..MMMMMMO MMMMMM
        MMMMMMMMM     MMMMMMO     MMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMM
         MMMMMMM.     MMMMMM$     NMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMMD   MMMMMMMMMMMMM
         =MMMMMI     .MMMMMMM.    MMMMMMM MMMMMM7     MMMMM          MMMMMMMMMMMMMMI    MMMMMM
         =MMMMM7      DMMMMMM     MMMMMM$ MMMMMM8    .MMMMM          MMMMMM. ZMMMMMM    MMMMMM
         =MMMMM7      .MMMMMMM . MMMMMMM  MMMMMMMM .ZMMMMM7          MMMMMM...MMMMMMM   MMMMMMMMMMMMMMM
         =MMMMM7        MMMMMMMMMMMMMMM.  .MMMMMMMMMMMMMMM           MMMMMM.  .MMMMMMI  MMMMMMMMMMMMMMM
         =MMMMM7         8MMMMMMMMMMMZ.     MMMMMMMMMMMMM            MMMMMM.  .MMMMMMM  MMMMMMMMMMMMMMM
         =MMMMM7            $MMMMM?            NMMMMMM.              MMMMMM     MMMMMMM MMMMMMMMMMMMMMM


       .=MMMMMMM.     OMMMMMM    .MMMMM       MMMMMMM       MMMMMM    ~MMMMMM
      MMMMMMMMMMMMM.  8MMMMMM     MMMMM    8MMMMMMMMMMM$    MMMMMM    =MMMMMM
     MMMMMMMMMMMMMMM. 8MMMMMM     MMMMM   MMMMMMMMMMMMMMM   MMMMMM    =MMMMMM
   .MMMMMM,  .?MMMMD. 8MMMMMM     MMMMM .MMMMMMM. .MMMMMM.  MMMMMM    =MMMMMM
   .MMMMMMM.          8MMMMMM     MMMMM  MMMMMM.   .MMMMMM. MMMMMM    =MMMMMM
    NMMMMMMMMMMMM~..  8MMMMMM     MMMMM :MMMMMM.            MMMMMMMMMMMMMMMMM
    .MMMMMMMMMMMMMMM  8MMMMMM     MMMMM 8MMMMMM             MMMMMMMMMMMMMMMMM
       MMMMMMMMMMMMMD 8MMMMMM     MMMMM 8MMMMMM             MMMMMMMMMMMMMMMMM
           ,MMMMMMMMM 8MMMMMM     MMMMM  MMMMMM.    MMMMMZ  MMMMMM    =MMMMMM
   MMMMMM.     MMMMMM 8MMMMMM     MMMMM .MMMMMM,    MMMMMM. MMMMMM    =MMMMMM
    MMMMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM8   MMMMMMMMMMMMMMM   MMMMMM    =MMMMMM
    .MMMMMMMMMMMMMMM   $MMMMMMMMMMMMMM     MMMMMMMMMMMMM.   MMMMMM    =MMMMMM
      OMMMMMMMMMMM.      MMMMMMMMMMM.       8MMMMMMMMMZ     MMMMMM    ~MMMMMM


         MMMMMMM.
        ?MMMMMMM:
        MMMMMMMMM
       :MMMMMMMMM.
       MMMMMMMMMMM.
      ,MMMM  MMMMM.
      MMMMM  MMMMMM
     ,MMMMI77DMMMMM.
     MMMMMMMMMMMMMMM
    .MMMMMMMMMMMMMMM.
    MMMMM     .MMMMMM
   .MMMMM      MMMMMM.
   MMMMM.      OMMMMMM


   7MMMMMM      MMMMM  MMMMMMMMMMMMMMM  MMMMMMMMMMMMMMM    MMMMMMMMMMMM8.
   7MMMMMMM     MMMMM  MMMMMMMMMMMMMMM  MMMMMMMMMMMMMMMMO. MMMMMMMMMMMMMMM
   7MMMMMMMM.   MMMMM  MMMMMMMMMMMMMMM  MMMMMM777MMMMMMMM. MMMMMMMMMMMMMMMM
   7MMMMMMMMM.  MMMMM  MMMMMM           MMMMMM    .MMMMMM= MMMMMM    MMMMMMM.
   7MMMMMMMMMM  MMMMM  MMMMMM           MMMMMM.  ..MMMMMM  MMMMMM     MMMMMM.
   7MMMM MMMMMM.MMMMM  MMMMMMMMMMMMM    MMMMMMMMMMMMMMMMM. MMMMMM     MMMMMMI
   7MMMMI MMMMMNMMMMM  MMMMMMMMMMMMM    MMMMMMMMMMMMMMM~   MMMMMM     MMMMMMZ
   7MMMM7  MMMMMMMMMM  MMMMMM           MMMMMMMMMMMMMM     MMMMMM     MMMMMM
   7MMMM7  =MMMMMMMMM  MMMMMM           MMMMMM  MMMMMMM.   MMMMMM   .MMMMMMM
   7MMMM7   +MMMMMMMM  MMMMMM           MMMMMM   MMMMMMO   MMMMMM...MMMMMMM.
   7MMMM7    ?MMMMMMM  MMMMMMMMMMMMMMM  MMMMMM  .DMMMMMM.  MMMMMMMMMMMMMMM.
   7MMMM7    .IMMMMMM  MMMMMMMMMMMMMMM  MMMMMM    MMMMMMM  MMMMMMMMMMMMMN
   7MMMM7      $MMMMM  MMMMMMMMMMMMMMM..MMMMMM    .MMMMMM$ MMMMMMMMMI

-->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>  working on a virtualbox dev server while offline - greg&#039;s weblog</title>
<meta name="robots" content="all">
<meta name="author" content="Greg Knapp">
<meta name="description" content="Greg's web log about software development, operating systems and other geeky topics">
<meta name="viewport" content="width=1024px">
<link rel="me" type="text/html" href="http://www.google.com/profiles/virtual.greg">
<link rel="stylesheet" type="text/css" media="screen" href="http://static.gregk.me/css/style.min.130721.css">
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" media="screen" href="http://static.gregk.me/css/ie6.css">
<![endif]-->
<!--[if IE]>
<style type="text/css" media="screen">
.post div.content, .post div.comments {
	display: inline-block;
}

#query {
    line-height: 1.6;
}
</style>
<![endif]-->

<script type='text/javascript' src='http://archive.gregk.me/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script>

<link rel='prev' title='MySQL bug' href='/2010/bug-in-mysql-5-1-37' />
<link rel='next' title='Three iPhone 3G, MMS &amp; Tethering APN settings' href='/2010/three-iphone-3g-mms-tethering-apn-settings' />

<link rel='canonical' href='/2010/working-on-vm-server-while-offline' />
<link rel='shortlink' href='/2010/working-on-vm-server-while-offline' />
</head>
<body>
<div id="container_header">
  <div id="header">
    <div class="title"><a href="/">greg&#039;s weblog</a></div>
    <div class="slug">the more I learn, the less I know</div>
  </div>
</div>
<div id="container_flooring">
  <div id="flooring">
    <div id="books">
      <img src="/resources/images/books.png" width="330" height="298" usemap="#map_books" alt="about me" title="">
      <map name="map_books" id="map_books">
        <area shape="poly" coords="17,73,81,288,210,248,254,264,321,88,206,37,173,8,140,36" href="/about" alt="about me" title="">
      </map>
    </div>
    <div id="camera">
      <img src="/resources/images/camera.png" width="165" height="178" usemap="#map_camera" alt="photography">
      <map name="map_camera" id="map_camera">
        <area shape="poly" coords="10,24,34,100,29,133,39,165,157,125,143,77,126,66,111,75,106,92,98,93,93,87,97,75,75,2" href="/photography" alt="photography" title="">
      </map>
    </div>
    <div id="macbook">
      <img src="/resources/images/macbook.png" width="373" height="357" usemap="#map_macbook" alt="software projects">
      <map name="map_macbook" id="map_macbook">
        <area shape="poly" coords="49,5,55,98,9,279,273,346,318,167,374,86" href="/software" alt="software projects" title="">
      </map>
    </div>
    <div id="iphone">
      <img src="/resources/images/iphone.png" width="81" height="107" usemap="#map_iphone" alt="contact me">
      <map name="map_iphone" id="map_iphone">
        <area shape="poly" coords="7,83,37,2,79,17,50,99" href="/contact" alt="contact me">
      </map>
    </div>
  </div>
</div>
<div id="container_stage">
    <div id="stage">
        <div id="content" class="hfeed">
              <div class="post hentry" id="post-583">
                <div class="heading">
                    <div class="date">
                        <div class="day">22</div><div class="month">Jun</div>
                    </div>
                    <div class="title">
                        <h1 class="entry-title"><a href="/2010/working-on-vm-server-while-offline">Working on a VirtualBox dev server while offline</a></h1>
                        <small>
                        	posted <abbr class="published" title="2010-06-22T19:47:02+00:00">2010</abbr> // 
                        	<a href="/category/osx" title="View all posts in osx" rel="category tag">osx</a>, <a href="/category/tech" title="View all posts in tech" rel="category tag">tech</a> // <span class="comment"><a href="/2010/working-on-vm-server-while-offline#comments">6</a></span>
                        </small>
                    </div>
                </div>
                <div class="content entry-content">
                	<p>This month I&#8217;ve got a couple of trips to the US, one work, one leisure. I&#8217;d like to be able to use some of the dead time during the flight to do some development work. Instead of running PHP, Apache and MySQL from my Mac, I run it from a Ubuntu virtual machine via <a href="http://www.virtualbox.org">VirtualBox</a>.</p>
<p>My previous configuration was to use a bridged network so the host could see the guest and access services running on it. Perfect &#8230; except when you don&#8217;t have a network connection, like when you&#8217;re on a flight.<span id="more-583"></span> Initially I struggled with OS X setting the wired interface <em>inactive</em> when a cable is not connected. I <a href="http://superuser.com/questions/150538/how-to-connect-to-a-virtualbox-guest-from-the-host-when-network-cable-unplugged">asked around</a> and found I needed to change the adapter type from <a href="http://www.virtualbox.org/manual/ch06.html#id2638006">bridged</a> to <a href="http://www.virtualbox.org/manual/ch06.html#network_hostonly">host only</a>.</p>
<p>Host only networking creates a new virtual adapter on the host machine using the loopback interface, VirtualBox names this <code>vboxnet0</code>. This adapter enables the host to see services on the guest but with no requirement for a physical NIC to be present, so it&#8217;ll work offline too.</p>
<h2>Setting up Host Only networking</h2>
<p>Host only adapters cannot provide internet access, therefore we&#8217;ll need two devices on the guest for when we&#8217;re online. The first device should be configured as NAT (the default), the second is the <em>host only</em> adapter.</p>
<div class="center"><img src="http://i993.photobucket.com/albums/af54/g4egk/host-only.png" alt="VirtualBox network adapter settings" width="544" height="220" /></div>
<p>Once you&#8217;ve added those adapters, go to <span class="macmenu">VirtualBox &raquo; Preferences &raquo; Network</span> and specify an IP (if the default doesn&#8217;t suit your network, otherwise go with the default). This is the IP you&#8217;ll use in Ubuntu (the guest) to connect to OS X. If you have mounted directories on the host, this is the IP address to include in your <code>/etc/fstab</code> on the guest.</p>
<p>Now we can boot our VM. Once the VM starts, if you run <code>ifconfig</code> in <span class="macmenu">Terminal</span>, you should see a virtual adapter has been added to OS X:</p>
<pre class="bash">$ ifconfig vboxnet0
vboxnet0: flags=8843<UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST> mtu 1500
	ether 0a:00:27:00:00:00 
	inet 192.168.56.1 netmask 0xffffff00 broadcast 192.168.56.255</pre>
<p>When Ubuntu has booted, configure the network interfaces:</p>
<pre class="bash">$ sudo vim /etc/network/interfaces</pre>
<p>If you chose to enable VirtualBox&#8217;s built in DHCP server, you can leave the NAT interface <code>eth0</code> as dynamically assigned:</p>
<pre class="bash">auto eth0
iface eth0 inet dhcp</pre>
<p>Assign the second host only adapter with a static IP address, this address must be on the same subnet as the <code>vboxnet0</code> adapter on the host. For example, if our IP was 192.168.56.1, the guest must use an IP within the range 192.168.56.2 &#8211; 255.</p>
<pre class="bash">
auto eth1
iface eth1 inet static
    address 192.168.56.5
    netmask 255.255.255.0
    network 192.168.56.0
    broadcast 192.168.56.255</pre>
<p>When you&#8217;re done, restart networking on the guest:</p>
<pre class="bash">$ sudo /etc/init.d/networking restart</pre>
<p>You should be able to SSH to Ubuntu from OS X now:</p>
<pre class="bash">$ ssh 192.168.56.5
Linux 2.6.32-21-generic-pae #32-Ubuntu SMP Fri Apr 16 09:39:35 UTC 2010 i686 GNU/Linux
Ubuntu 10.04 LTS

Welcome to Ubuntu!
....
$</pre>
                    <div class="g-plusone" data-size="medium"></div>
                        <a href="https://twitter.com/share?via=g4egk&amp;text=Working on a VirtualBox dev server while offline" class="twitter-share-button">Tweet</a>
                    <br>
                </div>
                <div id="previous"></div>
                <div id="next"></div>
                
                
  <div class="comments">
    <h3>comments</h3><a name="comments"></a>
      <div class="comment hcomment" id="comment-1485">
      <small class="poster vcard">
                  <a href="http://www.bigether.com" class="url fn" name="comment-1485" rel="external nofollow">Ben</a> //                 <abbr class="dtposted" title="2011-11-06T06:40:10+00:00">06.Nov.2011</abbr> // 06:40      </small>
      <div class="description">
        <p>Thanks for this.  I&#8217;m running in Win7 but this got me up and running just fine. I appreciate it!</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-3814">
      <small class="poster vcard">
                  <a href="http://zoumas.net" class="url fn" name="comment-3814" rel="external nofollow">Larry Zoumas</a> //                 <abbr class="dtposted" title="2012-10-25T14:37:14+00:00">25.Oct.2012</abbr> // 14:37      </small>
      <div class="description">
        <p>This is the best tutorial I have seen to configure a virtual machine for development purposes on Mac. I thank you for that and owe you a beer.</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-4878">
      <small class="poster vcard">
                  <span class="fn">Dave C</span> //
                <abbr class="dtposted" title="2013-03-16T12:55:23+00:00">16.Mar.2013</abbr> // 12:55      </small>
      <div class="description">
        <p>I came to this page because I want to be able to take my Mac off-grid and work on a webserver app on Ubuntu guest and run the browser on my Mac. </p>
<p>So far so good, the host-only network works nicely. My only issue is that after doing the setup, my shared folder stopped working. I&#8217;m trying to sort it out now, will report back here if/when I figure it out.</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-5096">
      <small class="poster vcard">
                  <span class="fn">Manny</span> //
                <abbr class="dtposted" title="2013-04-17T19:51:01+00:00">17.Apr.2013</abbr> // 19:51      </small>
      <div class="description">
        <p>Hi, thanks for an easy to follow tutorial.</p>
<p>I am having some trouble with my setup though. My guest is not seeing my host and vice versa. Pinging my host returns &#8220;Destination host unreachable&#8221;.</p>
<p>I followed all your instructions. I left my VBs built-in dhcp server enabled, but changed the ip range to 192.168.0.0. </p>
<p>My ubuntu guest servers interfaces file looks like this:</p>
<p># The loopback network interface<br />
auto lo<br />
iface lo inet loopback</p>
<p># The primary network interface<br />
auto eth0<br />
iface eth0 inet dhcp</p>
<p>auto eth1<br />
iface eth1 inet static<br />
address 192.168.0.131<br />
netmask 255.255.255.0<br />
network 192.168.0.0<br />
broadcast 192.168.0.255</p>
<p>When I run ifconfig on my guest, my eth0 returns an ip range of 10.0.2.*. My eth1 is set correctly to 192.168.0.131. I am not sure if this is what&#8217;s affecting communication between my guest and host. I am also not sure what I need to configure for my host which is a MAC.</p>
<p>Any help would be much appreciated.</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-6366">
      <small class="poster vcard">
                  <span class="fn">David Hall</span> //
                <abbr class="dtposted" title="2013-09-05T12:13:35+00:00">05.Sep.2013</abbr> // 12:13      </small>
      <div class="description">
        <p>Thanks for your blog post!  I have been trying to figure out how to use virtual hosts offline because I always used Bridged-Adaptor which relied on DHCP of my wifi network.  This is great.</p>
<p>To make it simpler, I found you can have VirtualBox run a dhcp server in the virtual network. In virtualbox main menue, select preferences (Cmd-,) then Network.  There you will see &#8220;Host Only&#8221; window.  If nothing is there, click little icon on right to create.  Select the little screw driver icon and you can then turn on dhcp server.<br />
That is of course far simpler than the manual configuration.</p>
      </div>
    </div>
          <div class="comment hcomment" id="comment-8827">
      <small class="poster vcard">
                  <span class="fn">kolybasov</span> //
                <abbr class="dtposted" title="2014-01-31T11:05:32+00:00">31.Jan.2014</abbr> // 11:05      </small>
      <div class="description">
        <p>Thank you for a great tutorial!</p>
      </div>
    </div>
    	<div class="navigation">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
</div>


              </div>
        </div>
    <div id="peripheral">
      <div id="blog_meta">
        
        
        <div class="tags">
          <h4>this post's tags</h4>
          <ul><li><a href="../../tag/host-only/index.html" rel="tag">host only</a></li><li><a href="../../tag/networking/index.html" rel="tag">networking</a></li><li><a href="../../tag/virtualbox/index.html" rel="tag">virtualbox</a></li></ul>        </div>
      </div>
      <div id="feeds">

      </div>
    </div>
    </div>
</div>
<script charset="utf-8" src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
<script type="text/javascript">
  window.___gcfg = {lang: 'en-GB'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<div id="container_footer">
    <div id="footer" class="vcard">
        <div class="who">
        	<h4>Who am I?</h4>
        	<p>My name is Greg &amp; this is my blog.
        	I'm a software engineer, amateur photographer, dad &amp; fulltime nerd.</p>
        	<p class="adr">I live in
        	<a href="http://maps.google.co.uk/maps/place?q=Hitchin" class="locality">Hitchin</a>, <abbr title="United Kingdom" class="country-name">England</abbr>. Once in a blue moon I write my thoughts on this blog.</p>
        </div>
        <div class="when">&nbsp;</div>
        <div class="where">
            <a href="http://github.com/gknapp" title="view my code" id="github"><span>My github projects</span></a>
            <a href="http://www.linkedin.com/in/g4egk" title="view my professional profile" id="linkedin" rel="me"><span>My Linkedin profile</span></a>
        </div>
        <div class="notice">
        	<strong>&copy; 2005-2014 <span class="fn n"><span class="given-name">Greg</span> <span class="family-name">Knapp</span></span>.</strong>
        	Views expressed here are my own and not necessarily those of my employer.
        </div>
        <div class="clear"><!-- for iPhone --></div>    </div>
</div>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1966441-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
  !window.jQuery && document.write(
  	unescape('%3Cscript src="http://static.gregk.me/js/jquery-1.4.2.min.js"%3E%3C/script%3E')
  )
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="http://static.gregk.me/js/jquery.ifixpng2.js"></script>
<script type="text/javascript">
  $.ifixpng('http://static.gregk.me/images/pixel.gif');
  $("#books img, #camera img, #macbook img, #iphone img").ifixpng();
</script>
<![endif]-->
<script type="text/javascript" src="http://static.gregk.me/js/min.110426.js"></script>
</body>
</html>
